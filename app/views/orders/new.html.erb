<header id="order_page">
</header>

<div class="container" id="checkout-container">
  <div class="row">
    <div id='order_summary' class='small-12 medium-12 large-5 large-offset-1 columns'>

      <p id='order_p'><%= "Order Summary (" + @current_cart.potential_appointments.count.to_s + " item)" %></p>
      <% current_user.carts.last.potential_appointments.each do |appointment| %>
      <div class='row' id='order_item'>
        <div class="small-2 medium-3 large-4 columns">
          <div class="advisor-checkout-avatar">
            <%= image_tag appointment.advisor.avatar.url(:medium) %>
          </div>
        </div>

        <div class="small-7 medium-9 large-8 columns">
          <div class="row">
            <div class="small-4 medium-3 large-2 columns">
              <label class="order-info-label">Advisor:</label>
            </div>
            <div class="small-8 medium-9 large-10 columns">
              <p class="order-info"><%= appointment.advisor.firstname %></p>
            </div>
          </div>

          <div class="row">
            <div class="small-5 medium-3 large-2 columns">
              <label class="order-info-label">Appointment:</label>
            </div>
            <div class="small-7 medium-9 large-10 columns">
              <p class="order-info"><%= appointment.title  %></p>
            </div>
          </div>
          <div class='row'>
            <div class="small-3 medium-3 large-2 columns">
              <label class="order-info-label">Date:</label>
            </div>
            <div class="small-9 medium-9 large-10 columns">
              <p class="order-info"><%= appointment.start_time.strftime("%A, %B %d, %Y") %></p>
            </div>
          </div>
          <div class="row">
            <div class="small-3 medium-3 large-2 columns">
              <label class="order-info-label">Time:</label>
            </div>
            <div class="small-9 medium-9 large-10 columns">
              <p class="order-info"><%= appointment.start_time.strftime("%l:%M %p ") %></p>
              <p class="order-info"> <%= appointment.end_time.strftime("-%l:%M %p") %></p>
            </div>
          </div>
        </div>
      </div>
      <% end %>
      <div class="row" id="order-total">
        <label>Order Total:</label>
        <% if current_user.student == true %>
        <p><%= "$" + @current_cart.total_price_student.to_s %></p>
        <% else %>
        <p><%= "$" + @current_cart.total_price_regular.to_s %></p>
        <% end %>
      </div>
    </div>

    <div id='order_div' class="small-12 medium-12 large-5 columns">
      <%= form_for @order do |f| %>
      <% if @order.errors %>
      <% @order.errors.full_messages.each do |message| %>
      <%= message %>
      <% end %>
      <% end %>

      <div class="row">
        <div class="small-4 medium-4 large-3 columns">
          <%= f.label :first_name %>
        </div>
        <div class="small-8 medium-8 large-9 columns">
          <%= f.text_field :first_name %>
        </div>
      </div>


      <div class="row">
        <div class="small-4 medium-4 large-3 columns">
          <%= f.label :last_name %>
        </div>
        <div class="small-8 medium-8 large-9 columns">
          <%= f.text_field :last_name %>
        </div>
      </div>


      <div class="row">
        <div class="small-4 medium-4 large-3 columns">
          <%= f.label :card_type %>
          <i class="fa fa-credit-card"></i>
        </div>
        <div class="small-8 medium-8 large-9 columns">
          <%= f.select :card_type, [["Visa", "visa"], ["MasterCard", "master"], ["Discover", "discover"], ["American Express", "american_express"]] %>
        </div>
      </div>

      <div class="row">
        <div class="small-4 medium-4 large-3 columns">
          <%= f.label :card_number %>
        </div>
        <div class="small-8 medium-8 large-9 columns">
          <%= f.text_field :card_number %>
        </div>
      </div>

      <div class="row">
        <div class="small-4 medium-4 large-3 columns">
          <%= f.label :card_verification, "Card Verification Value (CVV)" %>
        </div>
        <div class="small-8 medium-8 large-9 columns">
          <%= f.text_field :card_verification %>
        </div>
      </div>

      <div class="row">
        <div class="small-4 medium-4 large-3 columns">
          <%= f.label :card_expires_on %>
        </div>
        <div class="small-8 medium-8 large-9 columns">
          <%= date_select(:order,:card_expires_on, :use_month_numbers => true) %>
        </div>
        <%= f.submit "Submit", class: "button" %>
        <% end %>
      </div>
    </div>




  </div>
</div>
